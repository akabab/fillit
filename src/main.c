#include <fcntl.h>
#include <stdlib.h>
#include <unistd.h>
#include "libft.h"
#include "fillit.h"

const t_pattern		g_patterns[TETRI_PATTERNS_COUNT] = {
	{ "###...#.........", 57856, 3 },
	{ ".#...#..##......", 17600, 2 },
	{ "#...###.........", 36352, 3 },
	{ "##..#...#.......", 51328, 2 },
	{ "###.#...........", 59392, 3 },
	{ "##...#...#......", 50240, 2 },
	{ "..#.###.........", 11776, 3 },
	{ "#...#...##......", 35008, 2 },
	{ "###..#..........", 58368, 3 },
	{ ".#..##...#......", 19520, 2 },
	{ ".#..###.........", 19968, 3 },
	{ "#...##..#.......", 35968, 2 },
	{ ".##.##..........", 27648, 2 },
	{ "#...##...#......", 35904, 2 },
	{ "##...##.........", 50688, 2 },
	{ ".#..##..#.......", 19584, 2 },
	{ "####............", 61440, 4 },
	{ "#...#...#...#...", 34952, 1 },
	{ "##..##..........", 52224, 2 }
};

int			main(int ac, char *av[])
{
	int		fd;
	t_map	map;

	if (ac != 2)
	{
		ft_printf("Usage: %s [map.fillit]\n", av[0]);
		return (-1);
	}
	fd = open(av[1], O_RDONLY);
	if (fd == -1)
		error_msg_exit(NULL);
	ft_memset(&map, 0, sizeof(map));
	parse(fd, &map);
	close(fd);
	solve(&map);
	return (0);
}
